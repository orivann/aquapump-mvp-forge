FROM node:20-alpine

WORKDIR /app


COPY package.json package-lock.json* ./

# Use `npm install` in dev image to avoid CI lockfile strictness and to allow
# installing when package.json and lockfile are out of sync during active
# development. If you want a reproducible build for CI, use the production
# `Dockerfile` which runs `npm ci` during the build stage.
RUN npm install --legacy-peer-deps

COPY . .

EXPOSE 8080

CMD ["npm", "run", "dev"]
